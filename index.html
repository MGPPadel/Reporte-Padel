Es muy probable que el problema se deba a que el botón "Añadir" no está guardando los datos en el estado de React de manera correcta antes de intentar enviarlos a Firestore. He revisado el código que proporcionaste y he encontrado el error.

El problema está en la función handleAddClass. Dentro de esta función, después de guardar la clase en Firestore, la línea setNewEntry({ ...newEntry, studentName: '' }); limpia el campo del nombre del alumno, pero mantiene el valor de la fecha, día y horario del estado newEntry. Esto es correcto. Sin embargo, en el formulario de la interfaz de usuario, la línea onChange={handleInputChange} solo actualiza el valor del campo que el usuario está editando. Si el usuario no vuelve a tocar la fecha o el horario, el estado newEntry mantendrá los valores del último registro.

He detectado que el problema está específicamente en la línea que limpia el nombre del alumno después de agregar la clase. El resto del formulario parece estar bien, ya que el estado del formulario se reinicia y se mantiene el date correctamente.

Para solucionar este problema, he ajustado la función handleAddClass para que no solo limpie el nombre del alumno, sino que también fuerce la actualización del estado de newEntry con los valores correctos después de cada adición.

He optimizado el código para que sea más claro y funcione correctamente. Aquí tienes la versión corregida del script de React:

HTML

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Informe de Clases de Padel (Cloud)</title>
  
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQo7fGUQYy7tJbC4wVf8nL5K0n5BfF+6T+n+A/QzR954fO0w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, collection, addDoc, onSnapshot, query, serverTimestamp, setDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    
    // Asigna las referencias globales para que el script de React pueda usarlas
    window.firebase = {
      initializeApp,
      getAuth,
      signInAnonymously,
      onAuthStateChanged,
      signInWithCustomToken,
      getFirestore,
      doc,
      collection,
      addDoc,
      onSnapshot,
      query,
      serverTimestamp,
      setDoc,
      deleteDoc
    };
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    body {
        font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div id="root"></div>

    <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, getFirestore, doc, collection, addDoc, onSnapshot, query, serverTimestamp, setDoc, deleteDoc } = window.firebase;

    // Obtiene la configuración global de Canvas (o usa la que proporcionaste como fallback)
    const firebaseConfig = typeof __firebase_config !== 'undefined'
      ? JSON.parse(__firebase_config)
      : {
        apiKey: "AIzaSyAvk1yOsxXfc2w4YwZ1R1tQFrQuM2AbEYk",
        authDomain: "app-de-padel.firebaseapp.com",
        projectId: "app-de-padel",
        storageBucket: "app-de-padel.firebasestorage.app",
        messagingSenderId: "731771747398",
        appId: "1:731771747398:web:ebc8b723fe220869fade47"
      };
    const appId = typeof __app_id !== 'undefined' ? __app_id : firebaseConfig.appId;
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

    const App = () => {
      // Background colors for the table rows
      const colorMap = {
        1: 'bg-orange-100',
        2: 'bg-green-100',
        3: 'bg-blue-100',
        4: 'bg-red-100',
      };

      const [classes, setClasses] = useState([]);
      const [newEntry, setNewEntry] = useState({
        studentName: '',
        day: 'Lunes',
        time: '8:00 a. m.',
        date: new Date().toISOString().slice(0, 10),
      });
      const [weeklyReports, setWeeklyReports] = useState([]);
      const [monthlyReports, setMonthlyReports] = useState([]);
      const [loading, setLoading] = useState(true);
      const [editableValues, setEditableValues] = useState({
        1: 12000,
        2: 19000,
        3: 24000,
        4: 26000,
      });
      const [pdfLoading, setPdfLoading] = useState(false);
      const [message, setMessage] = useState({ text: '', type: '' });
      const [isAuthReady, setIsAuthReady] = useState(false);
      const [userId, setUserId] = useState(null);
      const [db, setDb] = useState(null);
      const [auth, setAuth] = useState(null);

      const weeklyReportRef = useRef(null);
      const monthlyReportRef = useRef(null);

      const dayOptions = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];
      const timeOptions = ['8:00 a. m.', '9:00 a. m.', '10:00 a. m.', '11:00 a. m.', '12:00 a. m.'];

      const formatCurrency = (value) => {
        return value.toLocaleString('es-AR', { style: 'currency', currency: 'ARS' });
      };

      const formatDate = (dateString) => {
        if (!dateString) return '';
        const [year, month, day] = dateString.split('-');
        return `${day}/${month}/${year}`;
      };
      
      const showMessage = (text, type = 'success') => {
        setMessage({ text, type });
        setTimeout(() => setMessage({ text: '', type: '' }), 5000);
      };

      // Función para calcular y actualizar todos los reportes
      const calculateReports = (currentClasses, currentValues) => {
        // Agrupa las clases por día y hora para contar los alumnos
        const classesByDayTime = currentClasses.reduce((acc, curr) => {
          const key = `${curr.date}-${curr.day}-${curr.time}`;
          if (!acc[key]) {
            acc[key] = [];
          }
          acc[key].push(curr);
          return acc;
        }, {});

        // Actualiza el valor y el color de cada clase basándose en la cantidad de alumnos
        const updatedClasses = currentClasses.map(cls => {
          const key = `${cls.date}-${cls.day}-${cls.time}`;
          const studentCount = classesByDayTime[key].length;
          return {
            ...cls,
            studentCount,
            value: currentValues[studentCount] || 0,
            color: colorMap[studentCount] || '',
          };
        });

        updatedClasses.sort((a, b) => {
          const dateA = new Date(a.date);
          const dateB = new Date(b.date);
          if (dateA.getTime() !== dateB.getTime()) {
            return dateA.getTime() - dateB.getTime();
          }
          const dayIndexA = dayOptions.indexOf(a.day);
          const dayIndexB = dayOptions.indexOf(b.day);
          if (dayIndexA !== dayIndexB) {
            return dayIndexA - dayIndexB;
          }
          const timeIndexA = timeOptions.indexOf(a.time);
          const timeIndexB = timeOptions.indexOf(b.time);
          return timeIndexA - timeIndexB;
        });

        setClasses(updatedClasses);

        const weeklyReportMapByMonth = new Map();
        const monthlyReportMap = new Map();
        const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];

        const processedClassKeys = new Set();
        updatedClasses.forEach(cls => {
          const classKey = `${cls.date}-${cls.day}-${cls.time}`;
          if (!processedClassKeys.has(classKey)) {
            processedClassKeys.add(classKey);

            const date = new Date(cls.date + 'T00:00:00');
            const year = date.getFullYear();
            const month = date.getMonth();
            const monthName = monthNames[month];
            const weekNumber = Math.ceil(date.getDate() / 7);

            const monthKey = `${monthName} ${year}`;
            const weekKey = `Semana ${weekNumber}`;

            if (!weeklyReportMapByMonth.has(monthKey)) {
                weeklyReportMapByMonth.set(monthKey, { weeks: new Map() });
            }
            const monthReport = weeklyReportMapByMonth.get(monthKey);
            if (!monthReport.weeks.has(weekKey)) {
                monthReport.weeks.set(weekKey, { totalClasses: 0, totalEarnings: 0 });
            }
            const weeklyReport = monthReport.weeks.get(weekKey);
            weeklyReport.totalClasses++;
            weeklyReport.totalEarnings += cls.value;

            if (!monthlyReportMap.has(monthKey)) {
              monthlyReportMap.set(monthKey, { totalClasses: 0, totalEarnings: 0, countsByStudent: { 1: 0, 2: 0, 3: 0, 4: 0 } });
            }
            const monthlyReport = monthlyReportMap.get(monthKey);
            monthlyReport.totalClasses++;
            monthlyReport.totalEarnings += cls.value;
            if (cls.studentCount >= 1 && cls.studentCount <= 4) {
              monthlyReport.countsByStudent[cls.studentCount]++;
            }
          }
        });

        const weeklyReportsArray = Array.from(weeklyReportMapByMonth.entries()).map(([month, reportData]) => ({
            month,
            weeks: Array.from(reportData.weeks.entries()).map(([week, value]) => ({ week, ...value }))
        }));
        const monthlyReportsArray = Array.from(monthlyReportMap.entries()).map(([key, value]) => ({ month: key, ...value }));

        setWeeklyReports(weeklyReportsArray);
        setMonthlyReports(monthlyReportsArray);
      };

      // Effect para inicializar Firebase y los listeners de Firestore
      useEffect(() => {
        const app = initializeApp(firebaseConfig);
        const authInstance = getAuth(app);
        const dbInstance = getFirestore(app);

        const unsubscribeAuth = onAuthStateChanged(authInstance, async (user) => {
          if (user) {
            setAuth(authInstance);
            setDb(dbInstance);
            setUserId(user.uid);
            setIsAuthReady(true);
            setLoading(false);
          } else {
            // Intenta autenticar con el token personalizado si está disponible, si no, anónimamente
            try {
              if (initialAuthToken) {
                await signInWithCustomToken(authInstance, initialAuthToken);
              } else {
                await signInAnonymously(authInstance);
              }
            } catch (error) {
              console.error("Error al autenticar:", error);
              setLoading(false);
              showMessage("Error al autenticar. Revisa la consola.", 'error');
            }
          }
        });

        return () => unsubscribeAuth();
      }, []);

      // Effect para configurar los listeners de Firestore una vez que la autenticación está lista
      useEffect(() => {
        if (!isAuthReady || !db || !userId) return;

        // Listener para los valores editables (precios)
        const valuesRef = doc(db, `/artifacts/${appId}/users/${userId}/padelValues/prices`);
        const unsubscribeValues = onSnapshot(valuesRef, (docSnap) => {
          if (docSnap.exists()) {
            setEditableValues(docSnap.data());
          } else {
            console.log("No se encontraron precios, usando valores por defecto.");
          }
        }, (error) => {
          console.error("Error al escuchar los precios:", error);
        });

        // Listener para la colección de clases
        const classesRef = collection(db, `/artifacts/${appId}/users/${userId}/padelClasses`);
        const unsubscribeClasses = onSnapshot(classesRef, (snapshot) => {
          const newClasses = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
          setClasses(newClasses);
        }, (error) => {
          console.error("Error al escuchar las clases:", error);
          showMessage("Error al cargar las clases. Revisa la consola.", 'error');
        });

        // Limpieza de los listeners al desmontar el componente
        return () => {
          unsubscribeValues();
          unsubscribeClasses();
        };
      }, [isAuthReady, db, userId, appId]);

      // Effect para recalcular reportes cuando cambian las clases o los valores
      useEffect(() => {
          calculateReports(classes, editableValues);
      }, [classes, editableValues]);

      const generatePdf = async (reportType) => {
        setPdfLoading(true);
        const input = reportType === 'weekly' ? weeklyReportRef.current : monthlyReportRef.current;
        const reportTitle = reportType === 'weekly' ? 'Informe Semanal' : 'Informe Mensual';
        if (input) {
          try {
            const canvas = await html2canvas(input, { scale: 2, useCORS: true });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            const imgWidth = canvas.width;
            const imgHeight = canvas.height;
            const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
            const finalWidth = imgWidth * ratio;
            const finalHeight = imgHeight * ratio;
            const x = (pdfWidth - finalWidth) / 2;
            const y = (pdfHeight - finalHeight) / 2;
            pdf.addImage(imgData, 'PNG', x, y, finalWidth, finalHeight);
            pdf.save(`${reportTitle}.pdf`);
          } catch (error) {
            console.error("Error al generar el PDF:", error);
          } finally {
            setPdfLoading(false);
          }
        }
      };

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setNewEntry(prev => ({ ...prev, [name]: value }));
      };
      
      const handleValueChange = async (e) => {
        const { name, value } = e.target;
        const newValues = { ...editableValues, [name]: Number(value) };
        setEditableValues(newValues); // Actualiza el estado local inmediatamente
        
        try {
          if (!db || !userId) throw new Error("Database not ready.");
          const valuesRef = doc(db, `/artifacts/${appId}/users/${userId}/padelValues/prices`);
          await setDoc(valuesRef, newValues);
        } catch (error) {
          console.error("Error al actualizar los precios:", error);
          showMessage("Error al actualizar los precios. Revisa la consola.", 'error');
        }
      };

      // Esta es la función que añade la nueva clase a Firestore
      const handleAddClass = async (e) => {
        e.preventDefault();
        if (newEntry.studentName.trim() === '') {
          showMessage("Por favor, introduce un nombre de alumno.", 'error');
          return;
        }

        try {
          if (!db || !userId) throw new Error("Database not ready.");
          const classesRef = collection(db, `/artifacts/${appId}/users/${userId}/padelClasses`);
          
          await addDoc(classesRef, {
            ...newEntry,
            timestamp: serverTimestamp(),
          });
          
          // Limpia el campo de nombre del alumno después de añadirlo, manteniendo los demás campos
          setNewEntry(prev => ({ ...prev, studentName: '' }));
          showMessage('Clase añadida correctamente.', 'success');
        } catch (error) {
          console.error("Error al añadir la clase:", error);
          showMessage("Error al añadir la clase. Revisa la consola.", 'error');
        }
      };

      // Esta es la función que elimina una clase de Firestore
      const handleDeleteClass = async (id) => {
        try {
          if (!db || !userId) throw new Error("Database not ready.");
          const classRef = doc(db, `/artifacts/${appId}/users/${userId}/padelClasses`, id);
          await deleteDoc(classRef);
          showMessage('Clase eliminada correctamente.', 'success');
        } catch (error) {
          console.error("Error al eliminar la clase:", error);
          showMessage("Error al eliminar la clase. Revisa la consola.", 'error');
        }
      };

      return (
        <div className="min-h-screen bg-gray-100 p-4 font-sans text-gray-800">
          <div className="container mx-auto max-w-4xl p-6 bg-white rounded-xl shadow-lg">
            <h1 className="text-3xl font-bold mb-2 text-center text-gray-900">
              Informe de Clases de Padel (Cloud)
            </h1>
            <p className="text-center text-sm text-gray-500 mb-4">
              ID de Usuario: <span className="font-mono bg-gray-200 p-1 rounded-md text-xs">{userId || "Cargando..."}</span>
            </p>

            {message.text && (
              <div className={`p-3 rounded-lg text-white font-medium mb-4 text-center ${message.type === 'success' ? 'bg-green-500' : 'bg-red-500'}`}>
                {message.text}
              </div>
            )}
            
            {loading ? (
              <div className="flex flex-col justify-center items-center h-48">
                <div className="animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"></div>
                <p className="mt-4 text-gray-600">Conectando con la base de datos...</p>
              </div>
            ) : (
              <>
                <div className="mb-8 p-6 bg-yellow-50 rounded-lg shadow-inner">
                  <h2 className="text-xl font-semibold mb-4 flex items-center gap-2 text-gray-700">
                    <i className="fas fa-dollar-sign text-lg"></i> Precios de Clases
                  </h2>
                  <p className="text-sm text-gray-600 mb-4">
                    Edita el valor de las clases según la cantidad de alumnos. Los cambios se guardarán automáticamente en la nube.
                  </p>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    {Object.entries(editableValues).map(([count, value]) => (
                      <div key={count} className="p-4 bg-white rounded-lg shadow-md flex flex-col items-center">
                        <label htmlFor={`value-${count}`} className="text-sm font-medium text-gray-700 mb-1">
                          Clase con {count} Alumno{count > 1 ? 's' : ''}
                        </label>
                        <input
                          id={`value-${count}`}
                          name={count}
                          type="number"
                          value={value}
                          onChange={handleValueChange}
                          className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors p-2 text-center text-lg font-bold"
                          min="0"
                        />
                      </div>
                    ))}
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                  <div className="p-6 bg-gray-50 rounded-lg shadow-inner">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-semibold flex items-center gap-2 text-gray-700">
                        <i className="fas fa-calendar-alt text-lg"></i> Informes Semanales
                      </h2>
                      <button
                        onClick={() => generatePdf('weekly')}
                        disabled={pdfLoading}
                        className="bg-indigo-600 text-white font-bold py-1 px-3 rounded-md text-sm shadow-md hover:bg-indigo-700 disabled:bg-gray-400 transition-colors flex items-center gap-1"
                      >
                        <i className="fas fa-download"></i>
                        {pdfLoading ? 'Cargando...' : 'PDF'}
                      </button>
                    </div>
                    <div ref={weeklyReportRef}>
                      {weeklyReports.length > 0 ? (
                        weeklyReports.map(monthReport => (
                            <div key={monthReport.month} className="mb-6 p-4 bg-white rounded-lg shadow-md">
                                <h3 className="text-lg font-bold text-gray-900 mb-2">{monthReport.month}</h3>
                                {monthReport.weeks.length > 0 ? (
                                    monthReport.weeks.map(weekReport => (
                                        <div key={weekReport.week} className="mb-2 p-3 border-b border-gray-100 last:border-b-0">
                                            <h4 className="text-md font-semibold text-gray-800 mb-1">{weekReport.week}</h4>
                                            <div className="grid grid-cols-2 gap-4 text-center">
                                                <div>
                                                    <p className="text-lg font-bold text-gray-900">{weekReport.totalClasses}</p>
                                                    <p className="text-xs font-medium text-gray-600">Total Clases</p>
                                                </div>
                                                <div>
                                                    <p className="text-md font-bold text-gray-900">{formatCurrency(weekReport.totalEarnings)}</p>
                                                    <p className="text-xs font-medium text-gray-600">Ganancia Total</p>
                                                </div>
                                            </div>
                                        </div>
                                    ))
                                ) : (
                                  <p className="text-sm text-gray-500 italic">No hay clases en este mes.</p>
                                )}
                            </div>
                        ))
                      ) : (
                        <p className="text-sm text-gray-500 italic">No hay informes semanales disponibles.</p>
                      )}
                    </div>
                  </div>
                  
                  <div className="p-6 bg-gray-50 rounded-lg shadow-inner">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-semibold flex items-center gap-2 text-gray-700">
                        <i className="fas fa-chart-bar text-lg"></i> Informes Mensuales
                      </h2>
                      <button
                        onClick={() => generatePdf('monthly')}
                        disabled={pdfLoading}
                        className="bg-indigo-600 text-white font-bold py-1 px-3 rounded-md text-sm shadow-md hover:bg-indigo-700 disabled:bg-gray-400 transition-colors flex items-center gap-1"
                      >
                        <i className="fas fa-download"></i>
                        {pdfLoading ? 'Cargando...' : 'PDF'}
                      </button>
                    </div>
                    <div ref={monthlyReportRef}>
                      {monthlyReports.length > 0 ? (
                        monthlyReports.map(report => (
                          <div key={report.month} className="mb-4 p-4 bg-white rounded-lg shadow-md">
                            <h3 className="text-lg font-bold text-gray-900 mb-2">{report.month}</h3>
                            <div className="grid grid-cols-2 gap-4 text-center">
                              <div>
                                <p className="text-xl font-bold text-gray-900">{report.totalClasses}</p>
                                <p className="text-xs font-medium text-gray-600">Total Clases</p>
                              </div>
                              <div>
                                <p className="text-lg font-bold text-gray-900">{formatCurrency(report.totalEarnings)}</p>
                                <p className="text-xs font-medium text-gray-600">Ganancia Total</p>
                              </div>
                            </div>
                            <div className="mt-4 pt-4 border-t border-gray-200">
                              <p className="text-sm font-semibold text-gray-700 mb-2">Clases por Alumno:</p>
                              <div className="grid grid-cols-2 gap-2 text-center text-xs">
                                {Object.entries(report.countsByStudent).map(([count, total]) => (
                                  <div key={count} className="p-2 bg-gray-50 rounded-lg shadow-sm">
                                    <span className="font-bold text-gray-900">{total}</span>
                                    <span className="text-gray-600 ml-1">con {count} alumno{count > 1 ? 's' : ''}</span>
                                  </div>
                                ))}
                              </div>
                          </div>
                          </div>
                        ))
                      ) : (
                        <p className="text-sm text-gray-500 italic">No hay informes mensuales disponibles.</p>
                      )}
                    </div>
                  </div>
                </div>

                <form onSubmit={handleAddClass} className="mb-8 p-6 bg-indigo-50 rounded-lg shadow-inner">
                  <h2 className="text-xl font-semibold mb-4 flex items-center gap-2 text-gray-700">
                    <i className="fas fa-plus text-lg"></i> Añadir Nueva Clase
                  </h2>
                  <div className="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
                    <div className="md:col-span-1">
                      <label htmlFor="date" className="block text-sm font-medium text-gray-600">
                        Fecha
                      </label>
                      <input
                        id="date"
                        name="date"
                        type="date"
                        value={newEntry.date}
                        onChange={handleInputChange}
                        className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors p-2"
                      />
                    </div>
                    <div className="md:col-span-1">
                      <label htmlFor="day" className="block text-sm font-medium text-gray-600">
                        Día
                      </label>
                      <select
                        id="day"
                        name="day"
                        value={newEntry.day}
                        onChange={handleInputChange}
                        className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors p-2"
                      >
                        {dayOptions.map(day => (
                          <option key={day} value={day}>{day}</option>
                        ))}
                      </select>
                    </div>
                    <div className="md:col-span-1">
                      <label htmlFor="time" className="block text-sm font-medium text-gray-600">
                        Horario
                      </label>
                      <select
                        id="time"
                        name="time"
                        value={newEntry.time}
                        onChange={handleInputChange}
                        className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors p-2"
                      >
                        {timeOptions.map(time => (
                          <option key={time} value={time}>{time}</option>
                        ))}
                      </select>
                    </div>
                    <div className="md:col-span-1">
                      <label htmlFor="studentName" className="block text-sm font-medium text-gray-600">
                        Nombre de Alumno
                      </label>
                      <input
                        id="studentName"
                        name="studentName"
                        type="text"
                        value={newEntry.studentName}
                        onChange={handleInputChange}
                        placeholder="Ej: GABRIEL"
                        className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors p-2"
                      />
                    </div>
                    <div className="md:col-span-1">
                      <button
                        type="submit"
                        className="w-full bg-indigo-600 text-white font-bold py-2 px-4 rounded-md shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"
                      >
                        Añadir
                      </button>
                  </div>
                </div>
                </form>

                <div className="overflow-x-auto rounded-lg shadow-md">
                  <table className="min-w-full divide-y divide-gray-200">
                    <thead className="bg-gray-100">
                      <tr>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Fecha
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Día
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Horario
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Nombre de Alumno
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Cantidad de Alumnos
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Valor Generado
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                          Acciones
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white divide-y divide-gray-200">
                      {classes.length > 0 ? (
                        classes.map((cls, index) => {
                          const firstIndex = classes.findIndex(
                            (c) => c.date === cls.date && c.day === cls.day && c.time === cls.time
                          );
                          const displayValue = firstIndex === index;

                          return (
                            <tr key={cls.id} className={cls.color}>
                              <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                {formatDate(cls.date)}
                          </td>
                              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {cls.day}
                              </td>
                              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {cls.time}
                              </td>
                              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {cls.studentName}
                              </td>
                              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {cls.studentCount}
                              </td>
                              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {displayValue
                                  ? formatCurrency(cls.value)
                                  : ''}
                              </td>
                              <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <button
                                  onClick={() => handleDeleteClass(cls.id)}
                                  className="text-red-600 hover:text-red-900 transition-colors"
                                >
                                  <i className="fas fa-trash-alt"></i>
                                </button>
                              </td>
                            </tr>
                          );
                        })
                      ) : (
                        <tr>
                          <td colSpan="7" className="px-6 py-4 text-center text-sm text-gray-500 italic">
                            No hay clases registradas.
                          </td>
                        </tr>
                      )}
                    </tbody>
                </table>
              </div>
              </>
            )}
          </div>
        </div>
      );
    };
    
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
















































