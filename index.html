<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>informe de clases de padel</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
        }
    </style>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    </script>
    <script type="module">
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    </script>
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const daysOfWeek = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"];
        const timesOfDay = [
            '8:00 a. m.', '9:00 a. m.', '10:00 a. m.', '11:00 a. m.', '12:00 p. m.', '13:00 p. m.', '14:00 p. m.',
            '15:00 p. m.', '16:00 p. m.', '17:00 p. m.', '18:00 p. m.', '19:00 p. m.', '20:00 p. m.', '21:00 p. m.'
        ];

        const defaultClassPrices = {
            1: 5500,
            2: 3200,
            3: 2700,
            4: 2200,
        };
        const peopleOptions = [1, 2, 3, 4];

        const colorMap = {
            1: 'bg-yellow-100',
            2: 'bg-green-100',
            3: 'bg-blue-100',
            4: 'bg-purple-100',
        };

        const App = () => {
            const [messageBox, setMessageBox] = useState({
                show: false,
                title: '',
                content: '',
                type: 'confirm', // 'confirm', 'success', 'error'
                onConfirm: null,
            });

            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [userId, setUserId] = useState(null);
            const [loading, setLoading] = useState(true);
            const [classes, setClasses] = useState([]);
            const [customPrices, setCustomPrices] = useState(defaultClassPrices);
            const [newEntry, setNewEntry] = useState({
                studentNames: [''], // Se ha cambiado a un array de nombres
                day: '',
                time: '8:00 a. m.',
                date: new Date().toISOString().slice(0, 10),
                studentCount: 1,
                price: defaultClassPrices[1],
            });
            const monthlyReportsInfo = useMemo(() => {
                const monthly = {};
                classes.forEach(cls => {
                    const [month, year] = cls.date.slice(0, 7).split('-').reverse();
                    const key = `${month}/${year}`;
                    if (!monthly[key]) {
                        monthly[key] = { total: 0, classes: 0 };
                    }
                    monthly[key].total += cls.price * cls.studentCount;
                    monthly[key].classes++;
                });
                return monthly;
            }, [classes]);

            const [view, setView] = useState('login');
            const [isEditing, setIsEditing] = useState(false);
            const [editedClassId, setEditedClassId] = useState(null);
            const firebaseAppRef = useRef(null);
            const dbRef = useRef(null);
            const authRef = useRef(null);
            const appIdRef = useRef(null);

            const showMessageBox = (title, content, type = 'confirm', onConfirm = null) => {
                setMessageBox({
                    show: true,
                    title,
                    content,
                    type,
                    onConfirm,
                });
            };

            const initializeFirebase = async () => {
                try {
                    const firebaseConfig = {
                        apiKey: "AzaSyA_G7P_S_m74_j_c8d_D2_v_l_E_a_u_t_b_y_e_B_l_X_O_p_s",
                        authDomain: "informe-de-clases-de-padel.firebaseapp.com",
                        projectId: "informe-de-clases-de-padel",
                        storageBucket: "informe-de-clases-de-padel.appspot.com",
                        messagingSenderId: "770425985854",
                        appId: "1:770425985854:web:8c5b62b08a9c7d4e5f7a2d"
                    };

                    firebaseAppRef.current = firebase.initializeApp(firebaseConfig);
                    dbRef.current = firebase.getFirestore(firebaseAppRef.current);
                    authRef.current = firebase.getAuth(firebaseAppRef.current);
                    appIdRef.current = "8c5b62b08a9c7d4e5f7a2d";
                } catch (error) {
                    console.error("Error al inicializar Firebase:", error);
                }
            };

            const handleLogin = async () => {
                setLoading(true);
                try {
                    const userCredential = await firebase.signInWithEmailAndPassword(authRef.current, email, password);
                    setUserId(userCredential.user.uid);
                    setView('list');
                } catch (error) {
                    showMessageBox('Error de autenticación', 'Usuario o contraseña incorrectos.', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const fetchClasses = async () => {
                if (!userId) return;
                setLoading(true);
                try {
                    const classesCollectionRef = firebase.collection(dbRef.current, `artifacts/${appIdRef.current}/users/${userId}/classes`);
                    const classSnapshot = await firebase.getDocs(classesCollectionRef);
                    const classList = classSnapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));
                    setClasses(classList);
                } catch (error) {
                    console.error("Error al obtener clases:", error);
                } finally {
                    setLoading(false);
                }
            };

            const fetchPrices = async () => {
                if (!userId) return;
                try {
                    const pricesCollectionRef = firebase.collection(dbRef.current, `artifacts/${appIdRef.current}/users/${userId}/prices`);
                    const pricesSnapshot = await firebase.getDocs(pricesCollectionRef);
                    const pricesData = pricesSnapshot.docs.reduce((acc, doc) => {
                        const data = doc.data();
                        acc[data.studentCount] = data.price;
                        return acc;
                    }, {});
                    setCustomPrices({ ...defaultClassPrices, ...pricesData });
                } catch (error) {
                    console.error("Error al obtener precios personalizados:", error);
                    setCustomPrices(defaultClassPrices); // Usa los precios por defecto en caso de error
                }
            };

            useEffect(() => {
                initializeFirebase();
                const unsubscribe = firebase.onAuthStateChanged(authRef.current, (user) => {
                    if (user) {
                        setUserId(user.uid);
                        setView('list');
                    } else {
                        setUserId(null);
                        setView('login');
                    }
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (userId) {
                    fetchClasses();
                    fetchPrices();
                }
            }, [userId]);

            useEffect(() => {
                // Cuando studentCount cambie, actualiza el precio y el número de campos de nombre.
                setNewEntry(prev => ({
                    ...prev,
                    price: customPrices[prev.studentCount],
                    studentNames: Array(prev.studentCount).fill(''), // Crea un array con el número correcto de cadenas vacías
                }));
            }, [newEntry.studentCount, customPrices]);

            const handleAddEntry = async () => {
                if (!newEntry.date || newEntry.studentCount === 0 || !newEntry.studentNames.every(name => name.trim() !== '')) {
                    showMessageBox('Error', 'Por favor, completa todos los campos de la clase.', 'error');
                    return;
                }

                setLoading(true);
                try {
                    const classesCollectionRef = firebase.collection(dbRef.current, `artifacts/${appIdRef.current}/users/${userId}/classes`);

                    const classData = {
                        studentNames: newEntry.studentNames, // Pasa el array directamente
                        day: daysOfWeek[new Date(newEntry.date).getDay()],
                        time: newEntry.time,
                        date: newEntry.date,
                        studentCount: newEntry.studentCount,
                        price: newEntry.price,
                    };

                    if (isEditing) {
                        const classDocRef = firebase.doc(classesCollectionRef, editedClassId);
                        await firebase.updateDoc(classDocRef, classData);
                        showMessageBox('Éxito', 'Clase actualizada correctamente.', 'success');
                    } else {
                        await firebase.addDoc(classesCollectionRef, classData);
                        showMessageBox('Éxito', 'Clase agregada correctamente.', 'success');
                    }
                    fetchClasses();
                    setNewEntry({
                        studentNames: [''],
                        day: '',
                        time: '8:00 a. m.',
                        date: new Date().toISOString().slice(0, 10),
                        studentCount: 1,
                        price: customPrices[1],
                    });
                    setIsEditing(false);
                    setEditedClassId(null);
                    setView('list');
                } catch (error) {
                    console.error("Error al guardar la clase:", error);
                    showMessageBox('Error', 'Hubo un error al guardar la clase.', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const handleDeleteEntry = (id) => {
                const onConfirm = async () => {
                    setMessageBox({ ...messageBox, show: false });
                    setLoading(true);
                    try {
                        const classesCollectionRef = firebase.collection(dbRef.current, `artifacts/${appIdRef.current}/users/${userId}/classes`);
                        await firebase.deleteDoc(firebase.doc(classesCollectionRef, id));
                        fetchClasses();
                        showMessageBox('Éxito', 'Clase eliminada correctamente.', 'success');
                    } catch (error) {
                        console.error("Error al eliminar la clase:", error);
                        showMessageBox('Error', 'Hubo un error al eliminar la clase.', 'error');
                    } finally {
                        setLoading(false);
                    }
                };
                showMessageBox('Confirmar', '¿Estás seguro de que quieres eliminar esta clase?', 'confirm', onConfirm);
            };

            const handleEditEntry = (entry) => {
                setIsEditing(true);
                setEditedClassId(entry.id);
                setNewEntry({
                    studentNames: entry.studentNames,
                    day: entry.day,
                    time: entry.time,
                    date: entry.date,
                    studentCount: entry.studentCount,
                    price: entry.price,
                });
                setView('add');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const handleGeneratePDF = async () => {
                setLoading(true);
                const content = document.getElementById('report-content');
                if (!content) {
                    setLoading(false);
                    showMessageBox('Error', 'No se encontró el contenido del reporte.', 'error');
                    return;
                }

                try {
                    const canvas = await html2canvas(content, {
                        scale: 2,
                        useCORS: true,
                    });
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jspdf.jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4',
                    });
                    const imgWidth = 210;
                    const pageHeight = 295;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;

                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;

                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight;
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }

                    const today = new Date().toISOString().slice(0, 10);
                    pdf.save(`informe_clases_padel_${today}.pdf`);
                } catch (error) {
                    console.error("Error al generar el PDF:", error);
                    showMessageBox('Error', 'Hubo un error al generar el PDF.', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = async () => {
                await firebase.getAuth(firebaseAppRef.current).signOut();
                setUserId(null);
                setClasses([]);
                setView('login');
            };

            const updatePrice = (studentCount) => {
                const newPrice = customPrices[studentCount];
                setNewEntry(prev => ({ ...prev, price: newPrice, studentCount: studentCount }));
            };

            const handlePriceChange = (studentCount, price) => {
                setCustomPrices(prev => ({
                    ...prev,
                    [studentCount]: price
                }));
            };

            const handleSavePrices = async () => {
                if (!userId) return;
                setLoading(true);
                try {
                    const pricesCollectionRef = firebase.collection(dbRef.current, `artifacts/${appIdRef.current}/users/${userId}/prices`);
                    for (const studentCount in customPrices) {
                        const price = customPrices[studentCount];
                        const priceDocRef = firebase.doc(pricesCollectionRef, studentCount.toString());
                        await firebase.updateDoc(priceDocRef, { studentCount: Number(studentCount), price });
                    }
                    showMessageBox('Éxito', 'Precios actualizados correctamente.', 'success');
                    fetchPrices();
                } catch (error) {
                    console.error("Error al guardar los precios:", error);
                    showMessageBox('Error', 'Hubo un error al guardar los precios.', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const renderMessageBox = () => {
                if (!messageBox.show) return null;

                const buttonText = messageBox.type === 'confirm' ? 'Confirmar' : 'Aceptar';
                const buttonColor = messageBox.type === 'error' ? 'bg-red-500' : 'bg-blue-500';

                return (
                    <div className="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
                        <div className="bg-white rounded-lg shadow-lg p-6 w-full max-w-sm">
                            <h3 className="text-xl font-bold mb-4">{messageBox.title}</h3>
                            <p className="text-gray-700 mb-6">{messageBox.content}</p>
                            <div className="flex justify-end space-x-4">
                                {messageBox.type === 'confirm' && (
                                    <button
                                        onClick={() => setMessageBox({ ...messageBox, show: false })}
                                        className="py-2 px-4 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400 transition"
                                    >
                                        Cancelar
                                    </button>
                                )}
                                <button
                                    onClick={() => {
                                        if (messageBox.onConfirm) {
                                            messageBox.onConfirm();
                                        } else {
                                            setMessageBox({ ...messageBox, show: false });
                                        }
                                    }}
                                    className={`py-2 px-4 text-white rounded-lg font-semibold ${buttonColor} hover:opacity-80 transition`}
                                >
                                    {buttonText}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderLogin = () => (
                <div className="flex items-center justify-center min-h-screen bg-gray-100">
                    <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
                        <h2 className="text-2xl font-bold mb-6 text-center">Iniciar Sesión</h2>
                        <div className="mb-4">
                            <label className="block text-gray-700 mb-2">Correo Electrónico</label>
                            <input
                                type="email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                placeholder="tuemail@ejemplo.com"
                            />
                        </div>
                        <div className="mb-6">
                            <label className="block text-gray-700 mb-2">Contraseña</label>
                            <input
                                type="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                placeholder="Contraseña"
                                onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                            />
                        </div>
                        <button
                            onClick={handleLogin}
                            className="w-full bg-blue-600 text-white p-3 rounded-lg font-bold hover:bg-blue-700 transition"
                        >
                            Iniciar Sesión
                        </button>
                    </div>
                </div>
            );

            const renderLoader = () => (
                <div className="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
                    <div className="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"></div>
                </div>
            );

            const renderAddClass = () => (
                <div className="container mx-auto p-4">
                    <button
                        onClick={() => {
                            setView('list');
                            setIsEditing(false);
                            setNewEntry({
                                studentNames: [''],
                                day: '',
                                time: '8:00 a. m.',
                                date: new Date().toISOString().slice(0, 10),
                                studentCount: 1,
                                price: customPrices[1],
                            });
                        }}
                        className="mb-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition"
                    >
                        &larr; Volver
                    </button>
                    <h2 className="text-3xl font-bold mb-6 text-center">{isEditing ? 'Editar Clase' : 'Añadir Clase'}</h2>
                    <div className="bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">Fecha</label>
                                <input
                                    type="date"
                                    value={newEntry.date}
                                    onChange={(e) => {
                                        const newDate = e.target.value;
                                        setNewEntry(prev => ({
                                            ...prev,
                                            date: newDate,
                                            day: daysOfWeek[new Date(newDate).getDay()],
                                        }));
                                    }}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">Día de la Semana</label>
                                <input
                                    type="text"
                                    value={daysOfWeek[new Date(newEntry.date).getDay()]}
                                    readOnly
                                    className="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"
                                />
                            </div>
                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">Hora</label>
                                <select
                                    value={newEntry.time}
                                    onChange={(e) => setNewEntry({ ...newEntry, time: e.target.value })}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    {timesOfDay.map(time => (
                                        <option key={time} value={time}>{time}</option>
                                    ))}
                                </select>
                            </div>
                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">Cantidad de Alumnos</label>
                                <select
                                    value={newEntry.studentCount}
                                    onChange={(e) => updatePrice(Number(e.target.value))}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    {peopleOptions.map(option => (
                                        <option key={option} value={option}>{option}</option>
                                    ))}
                                </select>
                            </div>
                        </div>
                        <div className="mb-6">
                            <label className="block text-gray-700 font-semibold mb-2">Nombres de Alumnos</label>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {Array.from({ length: newEntry.studentCount }).map((_, index) => (
                                    <input
                                        key={index}
                                        type="text"
                                        placeholder={`Nombre del Alumno ${index + 1}`}
                                        className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        value={newEntry.studentNames[index] || ''}
                                        onChange={(e) => {
                                            const newNames = [...newEntry.studentNames];
                                            newNames[index] = e.target.value;
                                            setNewEntry(prev => ({ ...prev, studentNames: newNames }));
                                        }}
                                    />
                                ))}
                            </div>
                        </div>
                        <div className="mb-6">
                            <label className="block text-gray-700 font-semibold mb-2">Precio Total</label>
                            <div className="relative">
                                <input
                                    type="number"
                                    value={newEntry.price}
                                    onChange={(e) => setNewEntry({ ...newEntry, price: Number(e.target.value) })}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                                <span className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold">$</span>
                            </div>
                        </div>
                        <button
                            onClick={handleAddEntry}
                            className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition"
                        >
                            {isEditing ? 'Guardar Cambios' : 'Añadir Clase'}
                        </button>
                    </div>
                </div>
            );


            const renderPriceSettings = () => (
                <div className="container mx-auto p-4">
                    <button
                        onClick={() => setView('list')}
                        className="mb-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition"
                    >
                        &larr; Volver
                    </button>
                    <h2 className="text-3xl font-bold mb-6 text-center">Configurar Precios</h2>
                    <div className="bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto">
                        <p className="text-gray-700 mb-4">Ajusta los precios por cantidad de alumnos. Estos precios se usarán por defecto al añadir nuevas clases.</p>
                        <div className="space-y-4 mb-6">
                            {peopleOptions.map(count => (
                                <div key={count} className="flex items-center space-x-4">
                                    <label className="text-gray-700 font-semibold flex-1">
                                        Precio para {count} alumno(s):
                                    </label>
                                    <div className="relative flex-2">
                                        <input
                                            type="number"
                                            value={customPrices[count] || ''}
                                            onChange={(e) => handlePriceChange(count, Number(e.target.value))}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <span className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold">$</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <button
                            onClick={handleSavePrices}
                            className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition"
                        >
                            Guardar Precios
                        </button>
                    </div>
                </div>
            );

            const renderListClasses = () => (
                <div className="container mx-auto p-4">
                    <header className="flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0">
                        <div className="flex space-x-2">
                            <button
                                onClick={() => setView('add')}
                                className="bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700 transition"
                            >
                                + Añadir Clase
                            </button>
                            <button
                                onClick={() => setView('prices')}
                                className="bg-gray-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-gray-700 transition"
                            >
                                Configurar Precios
                            </button>
                        </div>
                        <div className="flex space-x-2">
                            <button
                                onClick={handleGeneratePDF}
                                className="bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition"
                            >
                                Exportar a PDF
                            </button>
                            <button
                                onClick={handleLogout}
                                className="bg-gray-400 text-gray-800 py-2 px-4 rounded-lg font-semibold hover:bg-gray-500 transition"
                            >
                                Salir
                            </button>
                        </div>
                    </header>
                    <div id="report-content" className="bg-white p-6 rounded-lg shadow-lg">
                        <h2 className="text-3xl font-bold text-center mb-6">Clases de Padel</h2>
                        <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
                            {Object.entries(monthlyReportsInfo).map(([monthYear, info]) => (
                                <div key={monthYear} className="p-4 bg-gray-100 rounded-lg shadow">
                                    <h3 className="text-xl font-bold mb-2 text-center text-gray-800">{monthYear}</h3>
                                    <p className="text-center text-gray-700">Total de clases: <span className="font-semibold">{info.classes}</span></p>
                                    <p className="text-center text-gray-700">Ingreso total: <span className="font-semibold">${info.total.toLocaleString()}</span></p>
                                </div>
                            ))}
                        </div>
                        <div className="mt-8">
                            <h3 className="text-2xl font-bold mb-4">Clases Detalladas</h3>
                            <ul className="space-y-4">
                                {classes.sort((a, b) => new Date(b.date) - new Date(a.date)).map(cls => (
                                    <li
                                        key={cls.id}
                                        className={`p-4 rounded-lg shadow-md flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 ${colorMap[cls.studentCount]}`}
                                    >
                                        <div className="flex-1 text-gray-800 text-center md:text-left">
                                            <p className="font-semibold text-lg">
                                                {new Date(cls.date).toLocaleDateString('es-ES', {
                                                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                                                })}
                                            </p>
                                            <p>{cls.time}</p>
                                            <p>Alumnos: {cls.studentNames.join(', ')}</p>
                                            <p>Cantidad: {cls.studentCount}</p>
                                            <p>Precio: ${cls.price.toLocaleString()}</p>
                                        </div>
                                        <div className="flex space-x-2 mt-4 md:mt-0">
                                            <button
                                                onClick={() => handleEditEntry(cls)}
                                                className="bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition"
                                            >
                                                Editar
                                            </button>
                                            <button
                                                onClick={() => handleDeleteEntry(cls.id)}
                                                className="bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition"
                                            >
                                                Eliminar
                                            </button>
                                        </div>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>
                </div>
            );

            if (loading) return renderLoader();
            if (view === 'login') return renderLogin();

            return (
                <div className="container mx-auto p-4">
                    {renderMessageBox()}
                    {view === 'add' && renderAddClass()}
                    {view === 'prices' && renderPriceSettings()}
                    {view === 'list' && renderListClasses()}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
